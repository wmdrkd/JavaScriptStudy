<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    function formValidate() {
      /*
      form 태그를 배열형태로 얻어와서 사용하는 방법으로 HTML문서에 form은 2개이상 정의할 수 있으므로
      작성한 순서대로 인덱스가 부여된다.
      */
      //form태그의 DOM을 얻어온다.
      var frm = document.forms[0];
      //아이디에 입력값이 없는 경우 경고창을 띄우고 포커스를 이동한다.
      if(frm.id.value==""){
        alert("아이디를 입력해주세요");
        frm.id.focus();
        //이벤트핸들러로 false를 반환해야 전송이 차단된다.
        return false;
      }
      //부정연산자를 통해서도 빈값을 체크할 수 있다.
      if(!frm.pw.value){
        alert("패스워드를 입력해주세요");
        frm.pw.focus();
        return false;
      }
      /*
      false가 반환되지 않으면 묵시적으로 true가 반환된것으로 인식한다.
      따라서 아래 문장은 생략할 수 있다.
      */
      //return true;
    }

    function jsSubmit() {
      /*
      form 태그의 name 속성으로 DOM에 접근한다.(form에서는 가장 추천되는 방식)
      */
      var f = document.loginFrm2;
      if(f.id.value==''){
        alert("아이디를 입력하세요");
        f.id.focus();
        /*
        JS를 통해 폼값을 전송하는 경우에는 검증의 문제가 있을때 단순히 return을 통해 함수의
        실행을 종료하면 된다.
        */
        return;
      }
      if(f.pw.value==''){
        alert("패스워드를 입력하세요");
        f.pw.focus();
        return;
      }
      /*
      JS를 통해 action, method 속성값을 부여한다.
      이 경우 HTML에서 부여한 속성보다 우선순위가 높으므로 여기서 지정한 속성으로 지정된다.
      */
     //action이 빈값이므로 현재페이지로 전송된다.
      f.action = "";
      f.method = "get";
      //여기서 폼값이 서버로 제출(전송)된다.
      f.submit();
    }
  </script>
</head>
<body>
  <h2>form 전송방식 - HTML을 사용하는 방법</h2>
  <!-- 
  submit 이벤트가 발생되면 JS함수를 호출한다.
  입력값이 없는 상태로 로그인 버튼을 누르면 false가 반환되어 전송은 차단된다.
  action 속성을 지정하지 않았으므로 현재 페이지에서 전송한다.
  -->
  <form name="loginFrm1" method="get" onsubmit="return formValidate();">
    아이디 : <input type="text" name="id">
    <br>
    패스워드 : <input type="password" name="pw">
    <br>
    <!-- 
    submit 타입의 버튼을 누르는 즉시 '제출' 이벤트가 발생되어 서버로 값이 전송된다.
    전송방식이 get이라면 '전송할 URL?id=xxx'와 같이 폼값이 쿼리스트링 형식으로 전송된다.
    -->
    <input type="submit" value="로그인">
  </form>

  <h2>form 전송방식 - JavaScript를 사용하는 방법</h2>
  <!-- 
  JavaScript를 이용하면 method, action과 같은 속성들을 모두 제어할 수  있다.
  -->
  <form name="loginFrm2" method="post" action="abcd.html">
    아이디 : <input type="text" name="id">
    <br>
    패스워드 : <input type="password" name="pw">
    <br>
    <!-- 
    버튼 자체적으로 submit 기능이 없으므로 호출한 함수에서 강제로 전송해야한다.
    -->
    <input type="button" value="로그인" onclick="jsSubmit();">
  </form>
</body>
</html>