<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    //타이머 작동 확인을 위한 함수
    function fnOnce() {
      alert('5초후 딱 한번만 실행됨');
      console.log('fnOnce() 호출됨');
    }
    function fnContinue() {
      alert('3초마다 매번 실행됨');
      console.log('fnContinue() 호출됨');
    }
    
    //타이머 제어를 위한 전역변수 생성
    var timeOnce, timerMode;

    /*
    타이머 관련 함수 내부에서 호출할 함수명은 반드시 '문자열' 형태로 작성해야한다.
    그렇지 않으면 타이머가 동작하지 않는다.
    */
    function fnCallAfter(flag) {
      if(flag == 'T'){
        //5초 이후에 딱 한번만 지정한 함수 호출
        timeOnce = window.setTimeout('fnOnce()', 5000);
      }
      else{
        //3초마다 지정한 함수 호출
        timerMode = window.setInterval('fnContinue()', 3000);
      }
    }

    /*
    각 타이머 함수의 실행을 중지하고 싶을때는 타이머 참조변수를 사용하여
    clearXXX() 계열의 함수를 실행하면 된다.
    */
    function fnCallBreak(flag) {
      if(flag == 1){
        clearTimeout(timeOnce);
      }
      else{
        clearInterval(timerMode);
      }
    }
    
    /*
    Date 내장객체를 통해 현재시간으 얻어온 후 문자열로 구성한다.
    얻어온 시간을 innerHTML 속성을 통해 지속적으로 화면에 표시한다.
    */
    function displayTime() {
      var date = new Date();
      var displayClock = document.getElementById('clock');
      displayClock.innerHTML = date.getHours() + '시 '
      + date.getMinutes() + '분 '
      + date.getSeconds() + '초';
    }

    /*
    1초에 한번씩 지속적으로 함수를 호출하여 디지털시계를 구현한다.
    지속적으로 현재시간을 가져오므로 시간이 흘러가는 것처럼 보이게 된다.
    */
    function displayTimeCall() {
      //형식1 : 외부에 정의한 함수를 호출
      //setInterval('displayTime()', 1000);

      //형식2 : 타이머 함수 내부에 콜백함수를 직접 정의
      setInterval(() => {
        var date = new Date();
        var displayClock = document.getElementById('clock');
        displayClock.innerHTML = date.getHours() + '시 '
        + date.getMinutes() + '분 '
        + date.getSeconds() + '초';
      }, 1000);
    }
  </script>
</head>
<body>
  <h2>setInterval(), setTimeout() 함수</h2>

  <h3>일정 시간후 함수 실행</h3>
  <input type="button" value="5초후함수실행" onclick="fnCallAfter('T');">
  <input type="button" value="함수호출중지" onclick="fnCallBreak(1);">

  <h3>일정 시간마다 함수 실행</h3>
  <input type="button" value="3초마다함수실행" onclick="fnCallAfter('I');">
  <input type="button" value="함수호출중지" onclick="fnCallBreak(2);">

  <h3>간단한 디지털 시계 구현하기</h3>
  <span id="clock" style="color:red; font-size: 1.8em; font-weight: bold;"></span>
  <button type="button" onclick="displayTimeCall();">디지털 시계</button>
</body>
</html>