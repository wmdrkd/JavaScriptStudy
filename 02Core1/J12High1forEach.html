<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    /*
    forEach함수
    -Array의 크기인 N번 반복해서 콜백함수를 호출한다.
    -반환값이 없다.
    -콜백함수의 매개변수는 현재값만 필수이고, 나머지는 생략할 수 있다.
    형식] 원본배열.forEach(
            콜백함수(현재값, 현재값의 인덱스, 원본배열){
              실행부;
            }
            ,thisArgs
          );
        ※ thisArgs는 콜백함수 내에서 this.X와 같이 사용할 수 있다.
    */
    function forEachTest1() {
      console.error('forEachTest1() called..기본사용법');
      //함수 호출을 위한 원본배열 생성 
      var oldArray = [1,2,3,4,5];
      //배열을 통해 호출하므로 5번 반복해서 내부 콜백함수를 실행한다.
      oldArray.forEach(function(currentVal, index, array){
        /*
        현재 루프에서의 값과 인덱스를 콘솔에 출력한다.
        현재값: 1,2...5
        인덱스 : 0,1...4
        배열은 모두 원본배열을 출력한다.
        */
        console.log('현재값:'+ currentVal, '인덱스:'+ index, '배열:'+array);
      });
    }

    function forEachTest2() {
      console.error('forEachTest2() called..배열 요소의 합계');
      var oldArray = [1,2,3,4,5];
      //콜백함수 내에서 사용할 변수 선언
      var sum = 0;
      /*
      콜백함수를 별도로 정의함.
      이때 매개변수는 currentVal만 사용한다.
      index, array는 필요없는 경우 생략할 수 있다.
      */
      function getSum(currentVal) {
        //현재 루프의 요소를 sum에 누적해서 더한다.
        sum += currentVal;
      }
      //앞에서 선언한 콜백함수를 인수로 전달하여 실행한다.
      oldArray.forEach(getSum);
      //1~5까지의 합 15출력
      console.log(sum);
    }

    function forEachTest3() {
      console.error('forEachTest2() called..배열 요소의 합계');
      var oldArray = [1,2,3,4,5,6,7,8,9,10];
      var sum = 0;
      //콜백함수 내부에서 사용할 인수를 객체로 정의
      var myArgs = {min:3, max:7};
      //콜백함수 정의
      function getSum(currentVal) {
        /*
        인수로 사용할 객체의 Key를 이요해서 아래 조건에 사용한다.
        즉 3~7까지의 값만 sum에 누적해서 더해준다.
        */
        if(currentVal>=this.min && currentVal<=this.max){
          sum += currentVal;
        }
      }
      //콜백함수와 객체로 정의한 인수를 전달하여 함수를 실행한다.
      oldArray.forEach(getSum, myArgs);
      //3~7사이의 합 : 25
      console.log(sum);
    }
  </script>
</head>
<body>
  <h2>고차함수</h2>
  <div>
    <input type="button" onclick="forEachTest1();" value="forEach1">
    <input type="button" onclick="forEachTest2();" value="forEach2">
    <input type="button" onclick="forEachTest3();" value="forEach3">
  </div>
</body>
</html>