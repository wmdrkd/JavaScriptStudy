<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script type="text/javascript">
    /*
    map함수
    -배열 요소의 크기만큼 콜백함수를 실행해서 새로운 배열을 만들때 사용
    -즉 foreach와는 다르게 반환값이 존재한다.
    -원본배열의 크기가 N이라면, 새롭게 생성되는 배열의 크기도 N이된다.
    형식] 새로운배열 = 원본배열.map(
      콜백함수(현재값, 현재값의 인덱스, 원본배열){
        실행부;
        return반환값;
      }
      ,thisArgs
    );
    */
    function mapTest1() {
      console.error('mapTest1() called..기본사용법');
      //원본배열
      var oldArray = [1,2,3,4,5];
      //map함수의 반환값으로 새로운 배열이 생성됨
      var newArray = oldArray.map(
        function (currentVal, index, array) {
          //forEach와 동일한 결과가 콘솔에 출력됨
          console.log(currentVal, index, array);  
          //각 요소에 2를 곱한 결과를 순서대로 반환한다.
          return currentVal*2;
        }
      );
      //map 내부에서 반환한 값은 순서대로 newArray에 추가된다.
      console.log(newArray);
    }

    function mapTest2() {
    console.error('mapTest2() called..JSON객체 배열 활용하기');
    //객체를 여소로 하는 배열 생성
    var oldJSON = [
      {name : '이건', salary : 50000000},
      {name : '홍길동', salary : 10000000},
      {name : '임신구', salary : 30000000},
      {name : '이승룡', salary : 20000000}
    ];
    //콜백함수를 반복 실행하면서 반환된 값을 newJson에 저장한다.
    var newJson = oldJSON.map(
      function (currentVal) {
        //빈 객체 생성
        var returnObj = {};
        /*
        각 루프에서 currentVal로 전달되는 값은 {name : '이건', salary : 50000000}와 같은 객체이다.
        따라서 name을 key로 사용하고, salary를 Value로 설정한 새로운 객체를 생성한다.
        즉 {'홍길동':10000}과 같은 객체를 순서대로 반환한다.

        */
        returnObj[currentVal.name] = currentVal.salary;
        return returnObj;
      }
    );
    //새로운 객체를 가진 배열을 출력한다.
    console.log(newJson);
    }

    
    //콜백함수로 화살표 함수를 사용
    function mapTest3() {
      console.error('mapTest2() called..화살표 함수 사용하기');
      var oldArray = [1,2,3,4,5];
      //익명함수 대신 화살표함수로 정의
      var newArray = oldArray.map((num) =>{
        //각 루프의 요소를 제곱한 결과 반환
        return Math.pow(num,2);
      });
      //원본배열의 각 요소를 제곱한 결과를 가지는 새로운 배열 출력
      console.log(newArray);
    }
  </script>
</head>
<body>
  <h2>고차함수 - map()</h2>
  <div>
    <input type="button" onclick="mapTest1();" value="map1">
    <input type="button" onclick="mapTest2();" value="map2">
    <input type="button" onclick="mapTest3();" value="map3">
  </div>
</body>
</html>