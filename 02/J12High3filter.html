<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    /*
    filter함수
    -필터라는 이름과 같이 콜백함수의 조건에 만족하는 요소만 반화하여 새로운 배열을 만들때 사용한다.
    -map함수와 형식은 완전히 동일하지만, 반환값에 대한 부분만 차이가 있다.
    형식] 새로운배열 = 원본배열.filter(
                        콜백함수(현재값, 현재값의 인덱스, 원본배열){
                            실행부;
                            return 반환값에대한 조건;
                          }
                          , thisArgs
                        );
    */
    function filterTest1() {
      console.error('filterTest1() called..조건에 맞는 엘리먼트만 추출');
      var oldArray = [1,2,3,4,5];
      var newArray = oldArray.filter(function(currentVal){
        //1~5까지 순서대로 출력
        console.log('현재원소', currentVal);
        /*
        map과 동일하게 요소의 갯수만큼 콜백함수를 반복실행한다.
        단 , 요쇼중 3 이하인 것만 반환하여 새로운 배열을 만든다.
        */
        return currentVal <= 3;
      });
      console.log(newArray);
    }

    function filterTest2() {
      console.error('filterTest2() called..JSON 객체형배열 사용 및 검색');
      var oldJsonArray = [
        {name : '혜빈', salary : 100000},
        {name : '제인', salary : 200000},
        {name : '나윤', salary : 300000},
        {name : '주이', salary : 400000},
        {name : '아인', salary : 500000},
        {name : '낸시', salary : 600000},
      ];
      /*
      급여가 30만 이상인 객체만 반환하여 새로운 배열을 생성한다.
      여기서 thisArgs는 사용하지 않는다.
      이 경우 명시적으로 undefined을 기술하기도 한다.(보통 생략하는게 기본)
      */
      var newJsonArray = oldJsonArray.filter(function(currentVal){
        return currentVal.salary >= 300000;
      }, undefined);
      console.log(newJsonArray);
    }

    function filterTest3() {
      console.error('filterTest3() called..thisArgs 매개변수 사용하기');
      var oldArray = [1,2,3,4,5,50,100];
      //콜백함수 내에서 사용할 인수를 객체로 생성
      var thisArgs = {min:1, max:10};
      //콜백함수 정의
      function getMinMax(value) {
        //이 조건에 맞는 것만 반환해서 새로운 배열 생성
        return value >= this.min && value <= this.max;
      }
      //filter 함수 호출
      var newArray = oldArray.filter(getMinMax, thisArgs);
      //1~10 사이의 값을 반환
      console.log('thisArgs 사용결과', newArray);
    }
  </script>
</head>
<body>
  <h2>고차함수 - fillter()</h2>
  <div>
    <input type="button" onclick="fillterTest1();" value="fillter1">
    <input type="button" onclick="fillterTest2();" value="fillter2">
    <input type="button" onclick="fillterTest3();" value="fillter3">
  </div>
</body>
</html>